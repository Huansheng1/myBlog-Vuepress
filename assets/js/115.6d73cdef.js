(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{464:function(s,t,a){"use strict";a.r(t);var e=a(43),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"项目环境配置与npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目环境配置与npm-script"}},[s._v("#")]),s._v(" 项目环境配置与Npm Script")]),s._v(" "),a("h2",{attrs:{id:"vue项目环境配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue项目环境配置"}},[s._v("#")]),s._v(" Vue项目环境配置")]),s._v(" "),a("p",[s._v("在开发中，往往前端开发的时候，后端其实是并未开发完成的，这时候我们前端往往是通过 "),a("code",[s._v("mock")]),s._v("数据 或者 使用后端先给我们提供的测试接口 来进行开发。")]),s._v(" "),a("p",[s._v("因此，开发时接口 与 上线时接口 并不一致。")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("vue")]),s._v("项目中，我们可以很轻松地通过对"),a("code",[s._v("webpack")]),s._v("进行相应配置，避免来回修改我们的代码，从而避免产生新的"),a("code",[s._v("BUG")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("我们先来看下 项目根目录下的 "),a("code",[s._v("package.json")]),s._v("文件，这里面的 "),a("code",[s._v("script")]),s._v(" 不知道正在看 的 帅哥/美女 有没有关心过?"),a("img",{attrs:{src:"https://gitee.com/huanshenga/myimg/raw/master/PicGo/20200814151927.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("我们先来简单说下这三个是干嘛的，其实很简单，作用就是配置我们在"),a("code",[s._v("npm run xxx")]),s._v("后面的指令，因此，我们常用的"),a("code",[s._v("npm run serve")]),s._v("其实等于是 "),a("code",[s._v("npm run vue-cli-service serve")]),s._v("这条指令，等于帮我们缩短命令啦；后面两个指令分别是 打包代码 和 对整个项目代码进行格式化。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v(".js")]),s._v("文件中，通过"),a("code",[s._v("process.env.NODE_ENV")]),s._v("，我们可以获取到当前运行的模式；通过默认的运行指令，我们能通过该属性读到什么呢？")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// json文件不支持注释，复制到配置文件时请将注释删除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serve"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 上面指令运行通过 process.env.NODE_ENV 得到的就是下面这个")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode=development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包指令不方便测试，生成的资源文件使用太麻烦，我们通过下面配置可以模拟上面打包环境时切换的接口正不正常")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode=production"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service lint"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("--mode=xxx")]),s._v("就能将我们自己设置的"),a("code",[s._v("xxx")]),s._v("模式字段传递给"),a("code",[s._v("node")]),s._v("进程")])]),s._v(" "),a("blockquote",[a("p",[s._v("默认支持的只有三个：开发环境"),a("code",[s._v("development")]),s._v("、生产环境"),a("code",[s._v("production")]),s._v(" 、测试环境"),a("code",[s._v("test")])])]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("如何配置我们自己的自定义字段？")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode=dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("我们直接在"),a("code",[s._v("scripts")]),s._v("加上这个能够生效么？其实是不能的，可以测试一下，最后运行得到的还是"),a("code",[s._v("development")]),s._v("字段")])]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("怎么办呢？新建一个"),a("code",[s._v(".env.dev")]),s._v("文件，里面只需要写入一行代码：")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("运行我们自定义的代码："),a("code",[s._v("npm run dev")])]),s._v(" "),a("li",[s._v("怎么使用呢？定义如下文件，然后导入到网络模块里即可！")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// env.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" baseURL\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据 process.env.NODE_ENV 区分状态，切换不同的 baseURL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意，如果我们手动传 --mode 参数必须全称，默认的可用简写判断")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发环境，也可简写为：dev")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    baseURL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'收费接口不公开'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// proxy设置的代理接口")]),s._v("\n    baseURL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生产环境，也可简写为：prod")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 大佬接口可找其获取https://api.juanertu.com/如何使用")]),s._v("\n    baseURL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://api.juanertu.com/mallapi'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口请加老师微信 coderwhy003 获取地址")]),s._v("\n    baseURL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'收费接口不公开'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("blockquote",[a("p",[s._v("推荐文档："),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%EF%BF%A6%EF%BE%A8%EF%BE%A1%EF%BF%A5%EF%BE%BC%EF%BE%8F",target:"_blank",rel:"noopener noreferrer"}},[s._v("环境变量和模式 | Vue CLI"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);